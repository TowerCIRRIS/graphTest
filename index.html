<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graphtest1</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/c3@0.7.20/c3.min.css">
    <script src="https://cdn.jsdelivr.net/npm/c3@0.7.20/c3.min.js"></script>
    <script src = "https://d3js.org/d3.v5.min.js"></script>

    <script src="https://thunkable.github.io/webviewer-extension/thunkableWebviewerExtension.js" type="text/javascript"></script>

</head>
<body>

    <div id="chart"></div>

    <script>

    var chart = c3.generate({
        data: {
            columns: [
                ['Data 1', 0],
                ['Data 2', 0],
            ],
            type: 'spline'
        },
        point: {
            show: false
        },
        zoom: {
        enabled: true
        },
        axis: {
            y: {
                max: 250,
                min: 0
            }
        }
    });

    // setTimeout(function () {
    //     chart.load({
    //         columns: [
    //             ['Data 1', 3, 2, 1, 4, 1, 5, 2, 1, 3, 5, 3, 4],
    //         ],
    //         names: {'Data 1':'TBD'} ,
    //     });

    //     chart.axis.max({y:60});
    // }, 2000);

    // setTimeout(function () {

    //     chart.load({
    //         columns: [
    //             ['Data 2', 30, 20, 10, 40, 15, 25, 23, 19, 30, 50, 30, 40,10, 15, 20, 30, 20, 10]
    //         ],
    //         names: {'Data 2':'TBD'},
    //         color: {'Data 2':'#110001'}
    //     });

    //     chart.axis.max({y:160});

    // }, 3000);

    
    // setTimeout(function () {

    //     chart.load({
    //         columns: [
    //             ['Data 2', 30, 20, 10, 40, 15, 25, 23, 19, 30, 50, 30, 40,10, 15, 20, 30, 20, 10,
    //             30, 20, 10, 40, 15, 25, 23, 19, 30, 50, 30, 40,10, 15, 20, 30, 20, 10]
    //         ]
            
    //     });

    //     chart.axis.max({y:160});

    // }, 4000);

    // setTimeout(function () {

    // chart.load({
    //     columns: [
    //         ['Data 1', 3, 2, 1, 4, 1, 5, 2, 1, 3, 5, 3, 4,
    //         3, 2, 1, 4, 1, 5, 2, 1, 3, 5, 3, 4, 3, 2, 1, 4, 1, 5, 2, 1, 3, 5, 3, 4]
    //     ]
    // });

// chart.axis.max({y:100});

// }, 5000);



    ThunkableWebviewerExtension.receiveMessage(function(message) {

        var thunkData = JSON.parse(message);
        //var values = thunkData.values;
        //var data1Name = thunkData.data1Name;

      
        if(thunkData.type == 'data')
        {
   
            chart.load({
                columns: [
                    ['Data 1'].concat(thunkData.data1Value),
                    ['Data 2'].concat(thunkData.data2Value)

                ],
                type: 'spline',
                names: {
                    'Data 1':thunkData.data1Name,
                    'Data 2':thunkData.data2Name
                }
            });  
            //chart.axis.max({x:30});
          
        }

        if(thunkData.type == 'control')
        {
            if(thunkData.data1Type == 'AxeX')
            {
                chart.axis.max({y:thunkData.values});

            }

            if(thunkData.data1Type == 'AxeY')
            {
                chart.axis.max({y:thunkData.values});

            }

            if(thunkData.data1Type == 'displaySpeed')
            {
                if(thunkData.data1Value == 'on')
                {
                    chart.show('Data 1');
                }
                else
                {
                    chart.hide('Data 1');
                }

                

            }

            if(thunkData.data1Type == 'displayCadence')
            {
                if(thunkData.data1Value == 'on')
                {
                    chart.show('Data 2');
                }
                else
                {
                    chart.hide('Data 2');
                }

                

            }

            if(thunkData.data1Type == 'unloadGraph')
            {
                chart.unload();

            }

        }

        
          
        
    });

   


    </script>
</body>
</html>